{{> header}}

<!DOCTYPE html>
<html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="x-ua-compatible" content="IE=10">
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="css/pick-a-color-1.2.3.min.css">
    <link rel="stylesheet" href="css/main.css">
    <title>Mobile Customizing</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="js/jquery-3.4.1.js"></script>
    <link href="css/style.css" rel="stylesheet">
    <style>
        body {
            background-color: whitesmoke !important;
            margin: 0 !important;
            padding: 0 !important;
            height: 100% !important;
            padding-left: 15px !important;
            padding-right: 15px !important;
        }

        html {
            height: 100%;
        }

        #custom_width {
            margin-top: 40px;
            text-align: center;
        }

        #custom_width input {
            border: none;
            height: 40px;
            width: 85px;
            padding: 8px;
            box-sizing: border-box;
            font-size: 18px;
            border-radius: 3px;
            vertical-align: middle;
        }

        #custom_width button#button {
            border: none;
            background-color: #f13379;
            height: 40px;
            color: #fff;
            box-sizing: border-box;
            vertical-align: middle;
            border-radius: 2px;
            padding: 0 15px;
            cursor: pointer;
        }

        #custom_width button#reset {
            border: none;
            background-color: transparent;
            color: #fff;
            margin-top: 15px;
            cursor: pointer;
        }

        #container {
            overflow: hidden;
            max-width: 500px;
            width: 100%;
            margin: auto;
        }

        @media screen and (min-width: 700px) {
            #container {
                max-width: 700px;
            }
        }

        #container[data-size="small"] .block {
            width: 100%;
        }

        #container .big_block {
            width: 100%;
            padding: 40px;
            text-align: center;
            color: #fff;
            font-family: arial;
            box-sizing: border-box;
        }

        #container[data-size="small"] .big_block h1:after {
            font-size: 48px;
        }

        #container .block {
            width: 50%;
            float: left;
            height: 100px;
        }

        .clearfix:after {
            content: '';
            display: table;
            clear: both;

        }

        #main {
            background-color: BurlyWood;
            float: right;
            height: 200px;
            width: 75%;
            display: none;
        }

        #main2 {
            background-color: BurlyWood;
            height: 200px;
            width: 100%;
            float: right;
            display: none;
        }

        #sidebar {
            background-color: IndianRed;
            width: 320px;
            float: left;
            height: 568px;
            overflow: scroll;
            border: solid 1px black;
        }

        #dragbar {
            background-color: black;
            height: 100%;
            float: right;
            width: 3px;
            cursor: col-resize;
            z-index: 9999;
        }

        #dragbar2 {
            background-color: rgb(90, 74, 74);
            width: 100%;
            height: 5px;
            cursor: col-resize;
            z-index: 9999;
            margin-top: 180px;
        }

        #tempBar {
            width: 3px;
            background-color: #000;
            opacity: 0.5;
            position: absolute;
            cursor: col-resize;
            z-index: 999
        }

        #fetchatti {
            height: 667px;
            width: 375px;
            background-color: whitesmoke;
            overflow: scroll;
        }

        #fetchattuMain {
            margin-top: 10;
             transition: 0.5s;
        }
        #fetchConsoleParent {
            margin-top: 0;
            width: 20%;
        }

        #console3 {
            margin-top: 0;
            transition: 0.5s;
        }

        #cssList {
            margin-top: 0;
            transition: 0.5s;
        }

        #sourceCodeList {
            margin-top: 0;
            transition: 0.5s;
        }

        #mqList {
            margin-top: 0;
            transition: 0.5s;
        }

        #custom_width {
            margin-top: 0;
            transition: 0.5s;
        }

        #mediaContainer {
            margin-top: 0;
            transition: 0.5s;
        }
        #devi {
             margin-top: 0;
             transition: 0.5s;
        }
        #console3 {
  border: solid 1px black;
  width: 45%;
  color: green;
  background-color: khaki;
  margin-left: 30%;
}

#custom_width {
  border: solid 1px black;
  background-color: khaki;
  display: flex;
  justify-content: center;
}

#CustomizeTitle {
  color:black;
} 

#console {

}

#console2 {

}
    </style>
</head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
<script src="js/pick-a-color-1.2.3.min.js"></script>

<body>
    <!--   <div class="pick-a-color" >-->


    <!--btn btn-default color-dropdown dropdown-toggle  .... input-group-btn   </div>-->
    <!--"top: 50%;position: relative;transform: translateY(-50%);-->
    <div id="Navigation" style="width: 100%; height: 14vh; background-color: grey;">
        <div id="navButtons" style="display: flex;
        justify-content: center; height: 100px;">
            <button id="naytaNapit" onclick="hideShowElement(2,100)" class="buttonsInNavigation">Devices</button>
            <button id="naytaNapit" onclick="hideShowElement(3,200)" class="buttonsInNavigation">Show Source Code</button>
            <!--  <button id="naytaNapit" onclick="hideShowElement(3)"  class="buttonsInNavigation">CSS Files</button> -->
            <button id="naytaNapit" onclick="hideShowElement(4,200);" class="buttonsInNavigation">CSS Files</button>
            <button id="naytaNapit" class="buttonsInNavigation" onclick="hideShowElement(5,200)"
                style="background-color:cornsilk;">Show Media Queries</button>
         <!--   <button id="testiSql3" class="buttonsInNavigation">tallenna css tiedostost</button>
            <button id="testiSql4" class="buttonsInNavigation">reset Css</button>
            <button id="testiSql" class="buttonsInNavigation">Testi Sql Tallennus</button>
            <!-- <button onclick="testData(e)">Testi tallennus</button> -->
            <button onclick="fetchData()" class="buttonsInNavigation">Fetch Data</button>
          <!--   <button id="testiSql2" class="buttonsInNavigation">Check ScreenSize</button>
            <button id="naytaNapit" onclick="hideShowElement(6,100)" class="buttonsInNavigation">Fetch Souce
                Code</button>-->
            <button id="naytaNapit" onclick="hideShowElement(11,300)" class="buttonsInNavigation">Show Media
                Files</button>
            <button id="naytaNapit" onclick="hideShowElement(7,40)" class="buttonsInNavigation">Error Log</button>
        </div>
        <div></div>
        <div id="devi" style="background-color: khaki; display: flex;
        justify-content: center;">
            <button class="buttonsInNavigation" id="Galaxy">Galaxy S5</button>
            <button class="buttonsInNavigation" id="Pixel2">Pixel 2</button>
            <button class="buttonsInNavigation" id="Pixel2XL">Pixel 2 XL</button>
            <button class="buttonsInNavigation" id="Iphone5">Iphone 5/SE</button>
            <button class="buttonsInNavigation" id="Iphone6">Iphone 6/7/8</button>
            <button class="buttonsInNavigation" id="Iphone6Plus">Iphone 6/7/8 Plus</button>
            <button class="buttonsInNavigation" id="IphoneX">Iphone X</button>
            <button class="buttonsInNavigation" id="Ipad">Ipad</button>
            <button class="buttonsInNavigation" id="IpadPro">Ipad Pro</button>
        </div>
        <div id="sourceCodeList">
            <h2 style="color:#352d2d">Source Code</h2>
            <textarea id="divi2" style="height: 30vh; width: 50%; border: 1px solid black;
        float: left; overflow: scroll; font-size: 17px; background-color: khaki; "></textarea>
        </div><!-- Source Code-->
        <div id="cssList">
            <!-- CSS LIST-->
            <h2 style="color:#352d2d">List Of CSS Files</h2>
            <ul style="height: 30vh; width: 50%; border: 1px solid black;
                    float: left; overflow: scroll; font-size: 17px; background-color: khaki;" id="ulList">
            </ul>
        </div>
        <div id="mqList">
            <!-- MEdia Queries-->
            <h2 style="color:#352d2d">List Of MediaQueries</h2>
            <ul style="height: 30vh; width: 50%; border: 1px solid black;
                    float: left; overflow: scroll; font-size: 17px; background-color: khaki;" id="ulList2">
            </ul>
        </div>
        <div id="custom_width">
            <input type="text" id="width_input" placeholder="200" style="display:none;">
            <button id="button"
                style="display:none; background-color: #352d2d;border: solid 2px #584d4d;color: #c1bbbb;border-radius: 3px;width: 100px;text-align: center;">Change
                Width</button>

            <button id="reset" style="display:none;">Reset</button>
            <button onclick="fetchData()" class="buttonsInNavigation">Fetch Source Code</button>

            <input id="etsiSana" style="display:none;" placeholder="Etsi sana...."></input>
            <button onclick="findWord()"
                style="display:none; background-color: #352d2d;border: solid 2px #584d4d;color: #c1bbbb;border-radius: 3px;width: 100px;text-align: center;">Etsi
                sana</button>
            <button onclick="fetchMediaQuery()" class="buttonsInNavigation">Fetch MediaQueries</button>
            <button onclick="poistaCSS()" class="buttonsInNavigation">Remove Current CSS</button>
            <button onclick="getCSSfiles()" class="buttonsInNavigation">Fetch CSS Files</button>
            <button onclick="laitaTakaisinCSS()" class="buttonsInNavigation">Add modified CSS</button>

            <form method="POST" action="/asd" id="asd">
                <input type="hidden" name="user" id="input2">
                <button type="submit" form="asd" value="Submit" class="buttonsInNavigation">Save to Database</button>
            </form>
        </div>
        <div id="console3"><strong>No Errors</strong></div>
       
        <input type="text" style="width: 40%; padding-left: 200px;" name="font-color" id="colorPicker"
            class="pick-a-color form-control">
        <div id="tyylittely" style="background-color: khaki; color:black">
            <h1 id="CustomizeTitle">Customize:</h1>

            <ul id="ulList3">

            </ul>
            <button id="resetColorsButton" onclick="ResetAllColors()">Reset Colors</button>
        </div>
        <div id="mediaContainer">
            <!-- Media Files-->
            <h2 style="color:#352d2d">List Of Media Files</h2>
            <ul id="media" style="list-style: none;">

            </ul>
        </div>
        <div id="fetchConsoleParent">
            <div id="fetchConsole2">
                <p id="fetchConsole">Progress:</p>
            </div>
            <div id="fetchConsoleSc">
                <p>Source Code</p>
            </div>
            <div id="fetchConsoleCss">
                <p>Css Files</p>
            </div>
            <div id="fetchConsoleMq">
                <p id="fetchConsole">Mediaqueries</p>
            </div>
            <div id="fetchConsoleMf">
                <p>Media Files</p>
            </div>
            <div id="fetchConsoleAllDone">
                <p>All Done</p>
            </div>
        </div>
    </div>
    <!--Navigaatio loppuu-->
    <div id="fetchattuMain" >
         <div id="mediaNapit">
        </div>
        <!-- POSITION RELATIVE ALKUPERÄINEN-->
        <div id="container"
            data-sizes='{"small":{"maxWidth": 400}, "medium":{"minWidth": 400}, "large":{"minWidth": 700}}'>

            <div class="big_block" style="background-color: #424242">
                <div id="console">Width: 375px</div>
                <div id="console2">Height: 667px</div>
                 <div id="console5"></div>
                 <div id="console6"></div>
                  <div id="console7"></div>
                <div id="fetchatti">
                </div>

                <!--data-size="small"-->
            </div>
            <div class="clearfix">
                <div id="sidebar" style="display:none;  ">
                    <span id="position"></span>

                    <div id="dragbar"></div>
                    <!-- <div id="fetchatti"></div>-->
                    <div id="dragbar2"></div>
                </div>
                <div id="main">
                    main
                </div>
                <div id="main2">
                    main2
                </div>
            </div>

        </div>

    </div>
    <script>

        ////////////////////// X akseli
        let i = 0;
        let dragging = false;
        $('#dragbar').mousedown(function (e) {
            e.preventDefault();
            console.log("Drag X");
            dragging = true;
            let main = $('#main');
            let tempBar = $('<div>',
                {
                    id: 'tempBar',
                    css: {
                        height: main.outerHeight(),
                        top: main.offset().top,
                        left: main.offset().left
                    }
                }).appendTo('body');

            $(document).mousemove(function (e) {
                tempBar.css("left", e.pageX + 2);
            });

        });

        $(document).mouseup(function (e) {
            if (dragging) {
                let percentage = (e.pageX / window.innerWidth) * 100;
                let mainPercentage = 100 - percentage;



                //  $('#console').text("Width: " +  parseInt(percentage) + "%");

                $('#sidebar').css("width", percentage + "%");
                let pixels = parseInt($('#sidebar').width());
                $('#console').text("Width: " + pixels + "px  |  " + parseInt(percentage) + "%");
                $('#main').css("width", mainPercentage + "%");
                $('#tempBar').remove();
                $(document).unbind('mousemove');
                dragging = false;
            }
        });

        ////////////////////// Y akseli

        let dragging2 = false;
        $('#dragbar2').mousedown(function (e) {
            e.preventDefault();
            console.log("Drag Y");
            dragging2 = true;
            let main = $('#main');
            let tempBar = $('<div>',
                {
                    id: 'tempBar',
                    css: {
                        height: main.outerHeight(),
                        top: main.offset().top,
                        left: main.offset().left
                    }
                }).appendTo('body');

            $(document).mousemove(function (e) {
                tempBar.css("top", e.pageY + 2);
            });
        });

        $(document).mouseup(function (e) {
            if (dragging2) {
                let percentage = (e.pageY / window.innerHeight) * 100;
                let mainPercentage = 100 - percentage;

                $('#console2').text("Height: " + e.pageY + "px");
                $('#dragbar2').css("margin-top", e.pageY + 0.1);
                //   $('#fetchatti').css("height",e.pageY);
                $('#sidebar').css("height", e.pageY);
                $('#tempBar').remove();
                $(document).unbind('mousemove');
                dragging2 = false;
            }
        });
    </script>
    <script>
        (function (global, undefined) {

            function widthChanged(elem) {
                return elem.offsetWidth !== parseInt(elem.dataset.width);
            }

            function inRange(width, range) {
                let min = range.minWidth || 0;
                let max = range.maxWidth || Infinity;
                return width >= min && width <= max;
            }

            function isNumber(n) {
                return !isNaN(parseFloat(n)) && isFinite(n);
            }

            global.ElementMediaQuery = function (element, sizes) {

                if (arguments.length < 2) {
                    throw ('ElementMediaQuery expects 2 parameters ' + arguments.length + ' supplied.')
                }
                if (!(element instanceof Element)) {
                    throw ('The first argument for ElementMediaQuery must be a dom object');
                }
                if (typeof sizes !== "object") {
                    throw ('The second argument for ElementMediaQuery must be an object');
                }

                var $emqObj = this;
                $emqObj.element = element;
                $emqObj.sizes = sizes;

                element.dataset.width = element.offsetWidth;
                $emqObj.updateSize();

                var onWidthChange = new Event('onWidthChange');

                window.onresize = function (event) {
                    if (widthChanged(element)) {
                        element.dataset.width = element.offsetWidth;
                    }
                };
                var observer = new MutationObserver(function (mutations) {
                    mutations.forEach(function (mutation) {
                        if (widthChanged(element)) element.dataset.width = element.offsetWidth;
                        if (mutation.type === 'attributes' && mutation.attributeName === 'data-width') {
                            $emqObj.updateSize()
                            element.dispatchEvent(onWidthChange);
                        }
                    });
                });

                observer.observe(element, { attributes: true, childList: true, characterData: true, subtree: true });
            }
            ElementMediaQuery.prototype.updateSize = function () {
                var range_flag = 0;
                for (var size in this.sizes) {
                    if (inRange(this.element.offsetWidth, this.sizes[size])) {
                        this.element.dataset.size = size;
                        range_flag = 1;
                    }
                }
                if (!range_flag) this.element.dataset.size = '';
            }

            document.getElementById('container').addEventListener('onWidthChange', function (e) {
                console.log('Width Changed')
            }, false);

            var allElements = document.querySelectorAll('[data-sizes]');

            for (var element of allElements) {
                new ElementMediaQuery(element, JSON.parse(element.dataset.sizes));
            }


            document.getElementById('button').addEventListener('click', function (e) {
                var w = parseInt(document.getElementById('width_input').value);
                if (isNumber(w)) {
                    document.getElementById('container').setAttribute("style", "max-width:" + w + "px");
                }
            }, false);

            document.getElementById('reset').addEventListener('click', function (e) {
                document.getElementById('container').setAttribute("style", "");
                document.getElementById('width_input').value = '';
            }, false);
        })(this);

        $(document).ready(function () {
            $('meta[name="viewport"]').prop('content', 'width=30em');
        });
    </script>

    </script>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
    <script src="js/fetchSourceCode.js"></script>
    <script src="js/deviceSizes.js"></script>
    <script src="js/sendToDatabase.js"></script>
    <script src="js/tinycolor-0.9.14.min.js"></script>
    <script src="js/pick-a-color-1.2.3.min.js"></script>
    <script src="js/navigationButtons.js"></script>


    <script type="text/javascript">

        $(document).ready(function () {
            //   $(".input-group-btn open").css("display","none"); //PIILOTA TOINEN NAPPI OIKEALLA
            $(".pick-a-color").pickAColor();
        });

        $(document).ready(function () {
            $("#font-color").hide(); //piilota väri palettu
            $("#resetColorsButton").hide();
            $("#tyylittely").hide();
        });

        //näytä/piilota väri paletti aina kun elementtiä klikataan
        $('#ulList3').on('DOMSubtreeModified', function (event) {
            if ($('#ulList3 li').length >= 1) {
                $("#font-color").show();
                $("#resetColorsButton").show();
                $("#tyylittely").show();
            } else {
                $("#tyylittely").hide();
                $("#font-color").hide();
                $("#resetColorsButton").hide();
            }
        });

        $("#colorPicker").each(function () {
            var elem = $(this);
            elem.data('oldVal', elem.val());
            elem.bind("propertychange change click keyup input paste", function (event) {
                vaihdaVariElementtiin(elem.val());
                if (elem.data('oldVal') != elem.val()) {
                    elem.data('oldVal', elem.val());
                }
            });
        });
    </script>
</body>

</html>